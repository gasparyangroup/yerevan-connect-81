

# ะะปะฐะฝ: ะัะฟัะฐะฒะบะฐ ะดะฐะฝะฝัั ัะพัะผ ะฒ Telegram ัะตัะตะท Edge Function

## ะะฑะทะพั

ะะฐัััะพะธะผ ะฑะตะทะพะฟะฐัะฝัั ะพัะฟัะฐะฒะบั ะดะฐะฝะฝัั ะธะท ัะพัะผ `ContactModal` ะธ `SuggestionModal` ะฒ Telegram-ะฑะพั ัะตัะตะท Supabase Edge Function. ะขะพะบะตะฝ ะฑะพัะฐ ะฑัะดะตั ััะฐะฝะธัััั ะบะฐะบ ัะตะบัะตั ะฝะฐ ัะตัะฒะตัะต, ะฐ ะฝะต ะฒ ะบะปะธะตะฝััะบะพะผ ะบะพะดะต.

---

## ะงัะพ ะฑัะดะตั ัะตะฐะปะธะทะพะฒะฐะฝะพ

### 1. Edge Function `send-telegram`

ะกะพะทะดะฐะดะธะผ ัะตัะฒะตัะฝัั ััะฝะบัะธั, ะบะพัะพัะฐั:
- ะัะธะฝะธะผะฐะตั ะดะฐะฝะฝัะต ัะพัะผั ัะตัะตะท POST-ะทะฐะฟัะพั
- ะคะพัะผะฐัะธััะตั ัะพะพะฑัะตะฝะธะต ะดะปั Telegram
- ะัะฟัะฐะฒะปัะตั ะฒ ัะบะฐะทะฐะฝะฝัะน ัะฐั ัะตัะตะท Telegram Bot API
- ะะพะทะฒัะฐัะฐะตั ััะฐััั ะพัะฟัะฐะฒะบะธ

### 2. ะะฑะฝะพะฒะปะตะฝะธะต ัะพัะผ

- `ContactModal.tsx` - ะพัะฟัะฐะฒะบะฐ ะทะฐัะฒะพะบ (ัะฟะพะฝัะพั/ะฐััะธัะตะบัะพั/ะณะพะปะพัะพะฒะฐะฝะธะต)
- `SuggestionModal.tsx` - ะพัะฟัะฐะฒะบะฐ ะธะดะตะน ะฟัะพะตะบัะพะฒ

---

## ะััะธัะตะบัััะฐ

```text
โโโโโโโโโโโโโโโโโโโ      POST        โโโโโโโโโโโโโโโโโโโโ      HTTPS       โโโโโโโโโโโโโโโโ
โ   React Form    โ  โโโโโโโโโโโโโบ   โ  Edge Function   โ  โโโโโโโโโโโโโบ   โ  Telegram    โ
โ  (ContactModal/ โ   form data      โ  send-telegram   โ   Bot API        โ  Bot API     โ
โ  SuggestionModalโ                  โ                  โ                  โ              โ
โโโโโโโโโโโโโโโโโโโ                  โโโโโโโโโโโโโโโโโโโโ                  โโโโโโโโโโโโโโโโ
                                            โ
                                            โ secrets
                                            โผ
                                     โโโโโโโโโโโโโโโโโโโโ
                                     โ  TELEGRAM_BOT_   โ
                                     โ  TOKEN + CHAT_ID โ
                                     โโโโโโโโโโโโโโโโโโโโ
```

---

## ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### Edge Function: `supabase/functions/send-telegram/index.ts`

```typescript
// ะะฑัะฐะฑะพัะบะฐ ะดะฒัั ัะธะฟะพะฒ ัะพัะผ:
// 1. contact - ะทะฐัะฒะบะธ ะฝะฐ ัะฟะพะฝัะพัััะฒะพ/ะฐััะธัะตะบัััั/ะณะพะปะพัะพะฒะฐะฝะธะต
// 2. suggestion - ะฟัะตะดะปะพะถะตะฝะธั ะธะดะตะน

// ะคะพัะผะฐั ัะพะพะฑัะตะฝะธะน:
// ๐ ะะะะะฏ ะะะฏะะะ: ะกะฟะพะฝัะพั
// ๐ค ะะผั: John Doe
// ๐ ะขะตะปะตัะพะฝ: +374 XX XXX XXX
// ๐๏ธ ะัะพะตะบั: Komitas Square Improvement
// ๐ ะะพะบะฐัะธั: Center (Kentron)

// ๐ก ะะะะะฏ ะะะะฏ
// ๐ ะะฐะทะฒะฐะฝะธะต: New Community Garden
// ๐ ะะพะบะฐัะธั: Arabkir District
// ๐ ะะฟะธัะฐะฝะธะต: ...
```

### ะกะตะบัะตัั (ะฑัะดัั ะทะฐะฟัะพัะตะฝั)

| ะกะตะบัะตั | ะะฝะฐัะตะฝะธะต |
|--------|----------|
| `TELEGRAM_BOT_TOKEN` | `8431524815:AAFR4g2r-G2DNlgylWB3MA0JAUk1fJQWh8c` |
| `TELEGRAM_CHAT_ID` | `112447154` |

### ะะทะผะตะฝะตะฝะธั ะฒ ะบะพะผะฟะพะฝะตะฝัะฐั

**ContactModal.tsx:**
- ะะพะฑะฐะฒะธะผ ัะพััะพัะฝะธะต `isLoading` ะธ `error`
- ะะฐะผะตะฝะธะผ ัะธะผัะปััะธั ะฝะฐ ัะตะฐะปัะฝัะน ะฒัะทะพะฒ Edge Function
- ะะพะฑะฐะฒะธะผ ะพะฑัะฐะฑะพัะบั ะพัะธะฑะพะบ ั toast-ัะฒะตะดะพะผะปะตะฝะธัะผะธ

**SuggestionModal.tsx:**
- ะะฝะฐะปะพะณะธัะฝัะต ะธะทะผะตะฝะตะฝะธั ะดะปั ะพัะฟัะฐะฒะบะธ ะธะดะตะน

---

## ะคะฐะนะปั ะดะปั ัะพะทะดะฐะฝะธั/ะธะทะผะตะฝะตะฝะธั

| ะคะฐะนะป | ะะตะนััะฒะธะต |
|------|----------|
| `supabase/config.toml` | ะกะพะทะดะฐัั - ะบะพะฝัะธะณััะฐัะธั Supabase |
| `supabase/functions/send-telegram/index.ts` | ะกะพะทะดะฐัั - Edge Function |
| `src/components/ContactModal.tsx` | ะะทะผะตะฝะธัั - ะธะฝัะตะณัะฐัะธั ั API |
| `src/components/SuggestionModal.tsx` | ะะทะผะตะฝะธัั - ะธะฝัะตะณัะฐัะธั ั API |
| `src/integrations/supabase/client.ts` | ะกะพะทะดะฐัั - Supabase ะบะปะธะตะฝั |

---

## ะะพััะดะพะบ ัะตะฐะปะธะทะฐัะธะธ

1. **ะะบะปััะธัั Lovable Cloud** - ะดะปั ัะพััะธะฝะณะฐ Edge Functions
2. **ะะพะฑะฐะฒะธัั ัะตะบัะตัั** - ัะพะบะตะฝ ะฑะพัะฐ ะธ ID ัะฐัะฐ
3. **ะกะพะทะดะฐัั Edge Function** - `send-telegram` ั CORS ะธ ะปะพะณะธัะพะฒะฐะฝะธะตะผ
4. **ะกะพะทะดะฐัั Supabase ะบะปะธะตะฝั** - ะดะปั ะฒัะทะพะฒะฐ ััะฝะบัะธะน ะธะท React
5. **ะะฑะฝะพะฒะธัั ContactModal** - ะธะฝัะตะณัะฐัะธั ั Edge Function
6. **ะะฑะฝะพะฒะธัั SuggestionModal** - ะธะฝัะตะณัะฐัะธั ั Edge Function
7. **ะขะตััะธัะพะฒะฐะฝะธะต** - ะฟัะพะฒะตัะธัั ะพัะฟัะฐะฒะบั ะพะฑะพะธั ัะธะฟะพะฒ ัะพัะผ

---

## ะคะพัะผะฐั ัะพะพะฑัะตะฝะธะน ะฒ Telegram

### ะะฐัะฒะบะฐ (Contact)

```
๐ ะะะะะฏ ะะะฏะะะ: ะกะฟะพะฝัะพั

๐ค ะะผั: ะะฒะฐะฝ ะะตััะพะฒ
๐ ะขะตะปะตัะพะฝ: +374 99 123 456

๐๏ธ ะัะพะตะบั: Komitas Square Improvement
๐ ะะพะบะฐัะธั: Center (Kentron)

โฐ 05.02.2026, 14:30
```

### ะะดะตั (Suggestion)

```
๐ก ะะะะะฏ ะะะะฏ

๐ ะะฐะทะฒะฐะฝะธะต: ะะพะฒัะน ะพะฑัะตััะฒะตะฝะฝัะน ัะฐะด
๐ ะะพะบะฐัะธั: ะะฐะนะพะฝ ะัะฐะฑะบะธั

๐ ะะฟะธัะฐะฝะธะต:
ะกะพะทะดะฐะฝะธะต ะพะฑัะตััะฒะตะฝะฝะพะณะพ ัะฐะดะฐ ั ะทะพะฝะฐะผะธ ะพัะดััะฐ...

โฐ 05.02.2026, 14:30
```

---

## ะะตะทะพะฟะฐัะฝะพััั

- ะขะพะบะตะฝ ะฑะพัะฐ ััะฐะฝะธััั ะบะฐะบ ัะตะบัะตั ะฝะฐ ัะตัะฒะตัะต, ะฝะตะดะพัััะฟะตะฝ ะฒ ะฑัะฐัะทะตัะต
- ะัะพะดะฝัะต ะดะฐะฝะฝัะต ะฒะฐะปะธะดะธัััััั ะฝะฐ ัะตัะฒะตัะต
- CORS ะฝะฐัััะพะตะฝ ะดะปั ัะฐะทัะตััะฝะฝัั ะดะพะผะตะฝะพะฒ
- ะะพะณะธัะพะฒะฐะฝะธะต ะดะปั ะพัะปะฐะดะบะธ ะฑะตะท ัะฐัะบัััะธั ัะตะบัะตัะพะฒ

